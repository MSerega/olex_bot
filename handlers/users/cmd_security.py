from aiogram import types
from aiogram.dispatcher import FSMContext
from aiogram.dispatcher.filters.state import State, StatesGroup
from aiogram.dispatcher.filters import Text

from loader import dp
from keyboards import default as kb
from settings import functions


class FSM_security(StatesGroup):
    security = State()
    nezlamnist = State()
    fireline = State()


@dp.message_handler(text="üõ° –ë–µ–∑–ø–µ–∫–∞", chat_type=types.ChatType.PRIVATE, state="*")
async def cmd_poshta(message: types.Message):
    await functions.userInDb(message)
    await FSM_security.security.set()
    await message.answer("–û–±–µ—Ä—ñ—Ç—å –ø—É–Ω–∫—Ç –º–µ–Ω—é",
                         reply_markup=kb.security_menu,
                         disable_notification=True)


@dp.message_handler(Text(equals="üëàÔ∏è –ù–∞–∑–∞–¥"), state=FSM_security)
async def back_state(message: types.Message, state: FSMContext):
    current_state = await state.get_state()
    state_ = current_state.split(':')[1]
    if state_ in ['nezlamnist', 'fireline']:
        await FSM_security.security.set()
        await message.answer("–û–±–µ—Ä—ñ—Ç—å –ø—É–Ω–∫—Ç –º–µ–Ω—é", reply_markup=kb.security_menu)
    elif state_ == 'security':
        if current_state is None:
            return
        await state.finish()
        await message.answer("–í–∏ –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É –º–µ–Ω—é. –û–±–µ—Ä—ñ—Ç—å –ø—É–Ω–∫—Ç –º–µ–Ω—é", reply_markup=kb.main_menu)


@dp.message_handler(Text(equals="üè® –ü—É–Ω–∫—Ç–∏ –Ω–µ–∑–ª–∞–º–Ω–æ—Å—Ç—ñ"), state=FSM_security.security)
async def points_nezlamnist(message: types.Message, state: FSMContext):
    await message.answer(
        f"<b>–ù–∞ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—ó –≥—Ä–æ–º–∞–¥–∏ –≤–∏–∑–Ω–∞—á–µ–Ω–æ –º—ñ—Å—Ü—è —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ü—ñ–æ–Ω–∞—Ä–Ω–∏—Ö –ø—É–Ω–∫—Ç—ñ–≤ –æ–±—ñ–≥—Ä—ñ–≤—É ‚Äü–ü—É–Ω–∫—Ç–∏ –Ω–µ–∑–ª–∞–º–Ω–æ—Å—Ç—ñ‚Äù –≤ –ø—Ä–∏–º—ñ—â–µ–Ω–Ω—è—Ö:</b>\n\n "

        f"–ö–£ ‚Äü–û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–∏–π —Ü–µ–Ω—Ç—Ä —Å–æ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è (–Ω–∞–¥–∞–Ω–Ω—è —Å–æ—Ü—ñ–∞–ª—å–Ω–∏—Ö –ø–æ—Å–ª—É–≥)‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–∫–∞, –≤—É–ª. –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –£–∫—Ä–∞—ó–Ω–∏, 47;\n\n"
        f"‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä\n‚ùå –ë—É–ª–µ—Ä'—è–Ω\n‚úÖ –¢–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–∏–π –∫–æ—Ç–µ–ª\n‚úÖ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç\n‚úÖ –ü—ñ–¥–∑–∞—Ä—è–¥–∫–∞ –≥–∞–¥–∂–µ—Ç—ñ–≤\n\n"

        f"–ö–ó ‚Äü–¶–µ–Ω—Ç—Ä –∫—É–ª—å—Ç—É—Ä–∏ —Ç–∞ –¥–æ–∑–≤—ñ–ª–ª—è‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–∫–∞, –≤—É–ª. –ö–æ—Ü—é–±–∏–Ω—Å—å–∫–æ–≥–æ, 2;\n\n"
        f"‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä\n‚úÖ –ë—É–ª–µ—Ä'—è–Ω\n‚ùå –¢–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–∏–π –∫–æ—Ç–µ–ª\n‚úÖ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç\n‚úÖ –ü—ñ–¥–∑–∞—Ä—è–¥–∫–∞ –≥–∞–¥–∂–µ—Ç—ñ–≤\n\n"

        f"–í—ñ–¥–¥—ñ–ª –ø–æ–ª—ñ—Ü—ñ—ó ‚Ññ1 (–º.–ó–Ω–∞–º‚Äô—è–Ω–∫–∞) –ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ–ª—ñ—Ü—ñ—ó –ì–£–ù–ü –£–∫—Ä–∞—ó–Ω–∏ –≤ –ö—ñ—Ä–æ–≤–æ–≥—Ä–∞–¥—Å—å–∫—ñ–π –æ–±–ª–∞—Å—Ç—ñ, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–∫–∞, –≤—É–ª –®–µ–≤—á–µ–Ω–∫–∞,2;\n\n"
        f"‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä\n‚ùå –ë—É–ª–µ—Ä'—è–Ω\n‚ùå –¢–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–∏–π –∫–æ—Ç–µ–ª\n‚ùå –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç\n‚úÖ –ü—ñ–¥–∑–∞—Ä—è–¥–∫–∞ –≥–∞–¥–∂–µ—Ç—ñ–≤\n\n"

        f"29-–î–ü–†–ß 1–î–ü–†–ó –ì–£ –î–°–ù–° –£–∫—Ä–∞—ó–Ω–∏ —É –ö—ñ—Ä–æ–≤–æ–≥—Ä–∞–¥—Å—å–∫—ñ–π –æ–±–ª–∞—Å—Ç—ñ, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–∫–∞, –≤—É–ª. –ì–∞–≥–∞—Ä—ñ–Ω–∞,49\n\n"
        f"‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä\n‚ùå –ë—É–ª–µ—Ä'—è–Ω\n‚úÖ –¢–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–∏–π –∫–æ—Ç–µ–ª\n‚úÖ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç\n‚úÖ –ü—ñ–¥–∑–∞—Ä—è–¥–∫–∞ –≥–∞–¥–∂–µ—Ç—ñ–≤\n\n"

        f"–ö–ù–ü ‚Äü–û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–∞ –ª—ñ–∫–∞—Ä–Ω—è‚Äù, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç.–û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–∫–∞, –≤—É–ª.–®–µ–≤—á–µ–Ω–∫–∞, 57\n\n"
        f"‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä\n‚ùå –ë—É–ª–µ—Ä'—è–Ω\n‚úÖ –¢–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–∏–π –∫–æ—Ç–µ–ª\n‚úÖ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç\n‚úÖ –ü—ñ–¥–∑–∞—Ä—è–¥–∫–∞ –≥–∞–¥–∂–µ—Ç—ñ–≤\n\n"

        f"–ú–æ–±—ñ–ª—å–Ω–∏–π –ø—É–Ω–∫—Ç –î–°–ù–°, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–∫–∞, –≤—É–ª. –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –£–∫—Ä–∞—ó–Ω–∏, 81\n\n"
        f"‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä\n‚ùå –ë—É–ª–µ—Ä'—è–Ω\n‚ùå –¢–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–∏–π –∫–æ—Ç–µ–ª\n‚ùå –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç\n‚úÖ –ü—ñ–¥–∑–∞—Ä—è–¥–∫–∞ –≥–∞–¥–∂–µ—Ç—ñ–≤\n\n"

        f"–ü—É–∫—Ç –Ω–µ–∑–ª–∞–º–Ω–æ—Å—Ç—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É: –ê–ó–ö, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–∫–∞, –≤—É–ª. –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –£–∫—Ä–∞—ó–Ω–∏, 1\n\n"
        f"‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä\n‚ùå –ë—É–ª–µ—Ä'—è–Ω\n‚ùå –¢–≤–µ—Ä–¥–æ–ø–∞–ª–∏–≤–Ω–∏–π –∫–æ—Ç–µ–ª\n‚ùå –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç\n‚úÖ –ü—ñ–¥–∑–∞—Ä—è–¥–∫–∞ –≥–∞–¥–∂–µ—Ç—ñ–≤\n\n"

        f"<b>–Ü–Ω—à—ñ –ø—É–Ω–∫—Ç–∏ –Ω–µ–∑–ª–∞–º–Ω–æ—Å—Ç—ñ –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó –≥—Ä–æ–º–∞–¥–∏:</b>\n\n"

        f"–ö–ó ‚Äü–ú–∏—Ö–∞–π–ª—ñ–≤—Å—å–∫–∏–π –ª—ñ—Ü–µ–π‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å –ú–∏—Ö–∞–π–ª—ñ–≤–∫–∞, –≤—É–ª. –ü—É—à–∫—ñ–Ω–∞, 1;\n\n"
        f"–°—Ç–∞—Ä–æ–æ—Å–æ—Ç—Å—å–∫–æ—ó —Ñ—ñ–ª—ñ—ó –ö–ó ‚Äü–û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–∏–π –ª—ñ—Ü–µ–π ‚Ññ 1‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å –°—Ç–∞—Ä–∞ –û—Å–æ—Ç–∞, –≤—É–ª. –Ü–≤–∞–Ω–∞ –õ—ñ—Å–Ω—è–∫–∞, 30;\n\n"
        f"–¶–≤—ñ—Ç–Ω–µ–Ω—Å—å–∫–æ—ó —Ñ—ñ–ª—ñ—ó –ö–ó ‚Äü–ö—Ä–∞—Å–Ω–æ—Å—ñ–ª—å—Å—å–∫–∏–π –ª—ñ—Ü–µ–π‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å –¶–≤—ñ—Ç–Ω–µ, –≤—É–ª. –®–∫—ñ–ª—å–Ω–∞ 1;\n\n"
        f"–ö–ó ‚Äü–ö—Ä–∞—Å–Ω–æ—Å—ñ–ª—å—Å—å–∫–∏–π –ª—ñ—Ü–µ–π‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å –ö—Ä–∞—Å–Ω–æ—Å—ñ–ª–ª—è, –≤—É–ª. –ù–æ–≤–∞ 12;\n\n"
        f"–í–∏—â–µ–≤–µ—Ä–∏—â–∞–∫—ñ–≤—Å—å–∫–æ—ó —Ñ—ñ–ª—ñ—ó –ö–ó ‚Äü–ö—Ä–∞—Å–Ω–æ—Å—ñ–ª—å—Å—å–∫–∏–π –ª—ñ—Ü–µ–π‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å –í–∏—â—ñ –í–µ—Ä–µ—â–∞–∫–∏, –≤—É–ª. –®–∫—ñ–ª—å–Ω–∞ 1;\n\n"
        f"–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–µ –ø—Ä–∏–º—ñ—â–µ–Ω–Ω—è –ë—ñ—Ä—á–∞–Ω—Å—å–∫–æ–≥–æ —Å—Ç–∞—Ä–æ—Å—Ç–∞—Ç—É, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å –ë—ñ—Ä–∫–∏, –≤—É–ª. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞ 47;\n\n"
        f"–ü—ñ–¥–ª—ñ—Å–Ω–µ–Ω—Å—å–∫–æ—ó —Ñ—ñ–ª—ñ—ó –ö–ó ‚Äü–û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–∏–π –ª—ñ—Ü–µ–π ‚Ññ 2‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å –ü—ñ–¥–ª—ñ—Å–Ω–µ, –≤—É–ª. –ê–≤–¥—ñ—î–≤—Å—å–∫–æ–≥–æ 1;\n\n"
        f"–õ—ñ—Å—ñ–≤—Å—å–∫–æ—ó —Ñ—ñ–ª—ñ—ó –ö–ó ‚Äü–ú–∏—Ö–∞–π–ª—ñ–≤—Å—å–∫–∏–π –ª—ñ—Ü–µ–π‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç –õ—ñ—Å–æ–≤–µ, –≤—É–ª. –¢—ñ—Ç–æ–≤–∞ 215;\n\n"
        f"–Ü–≤–∞–Ω–≥–æ—Ä–æ–¥—Å—å–∫–æ—ó —Ñ—ñ–ª—ñ—ó –ö–ó ‚Äü–û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–∏–π –ª—ñ—Ü–µ–π ‚Ññ 2‚Äù –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å –Ü–≤–∞–Ω–≥–æ—Ä–æ–¥, –≤—É–ª. –®–∫—ñ–ª—å–Ω–∞ 1;\n\n"
        f"–Ñ–ª–∏–∑–∞–≤–µ—Ç–≥—Ä–∞–¥–∫—ñ–≤—Å—å–∫–∏–π –∑–∞–∫–ª–∞–¥ –¥–æ—à–∫—ñ–ª—å–Ω–æ—ó –æ—Å–≤—ñ—Ç–∏ (–¥–∏—Ç—è—á–∏–π —Å–∞–¥–æ—á–æ–∫) –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ä–∞–¥–∏, –∑–∞ –∞–¥—Ä–µ—Å–æ—é: —Å–º—Ç –Ñ–ª–∏–∑–∞–≤–µ—Ç–≥—Ä–∞–¥–∫–∞, –ø—Ä–æ–≤. –û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –®–∞–ø–æ–≤–∞–ª–∞ 1.\n\n" + kb.links
        , disable_notification=True, reply_markup=kb.back_btn)
    await FSM_security.nezlamnist.set()


@dp.message_handler(Text(equals="üî• –ì–∞—Ä—è—á–∞ –ª—ñ–Ω—ñ—è"), state=FSM_security.security)
async def points_nezlamnist(message: types.Message, state: FSMContext):
    await message.answer(
        f"–ì–∞—Ä—è—á–∞ –ª—ñ–Ω—ñ—è –¥–ª—è –≤—Å—ñ—Ö –∂–∏—Ç–µ–ª—ñ–≤ –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤—Å—å–∫–æ—ó —Å–µ–ª–∏—â–Ω–æ—ó —Ç–µ—Ä–∏—Ç–æ—Ä—ñ–∞–ª—å–Ω–æ—ó –≥—Ä–æ–º–∞–¥–∏.\n\n–ü–æ –≤—Å—ñ–º –ø–∏—Ç–∞–Ω–Ω—è–º –ø—Ä–æ—Å–∏–º–æ "
        f"—Ç–µ–ª–µ—Ñ–æ–Ω—É–≤–∞—Ç–∏ –∑–∞ –Ω–æ–º–µ—Ä–∞–º, —è–∫–∏–π –ø—Ä–∞—Ü—é—î —Ü—ñ–ª–æ–¥–æ–±–æ–≤–æ:\n\nüì± +38(098)-717-72-34.",
        disable_notification=True, reply_markup=kb.back_btn)
    await FSM_security.fireline.set()
